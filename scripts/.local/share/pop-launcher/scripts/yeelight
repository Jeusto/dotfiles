#!/usr/bin/bash
#
# name: Manage yeelight
# keywords: yee lights
# icon: preferences-color-symbolic

# Constants
yeelight_ip="192.168.1.20"
yee_command="/home/asaday/.cargo/bin/yeelight-cli $yeelight_ip"

# Options
yeelight_presets=("Night" "CosyHome" "PcMode")

declare -A yeelight_options=(
  ["ğŸ’¡ Toggle on/off"]="toggle"
  ["ğŸ–¼ï¸ Set preset"]="set_preset"
  ["ğŸšï¸ Adjust brightness"]="adjust_brightness"
)

# Selection
selected=$(printf '%s\n' "${!yeelight_options[@]}" | rofi -dmenu -i -p "Yeelight:")

# Actions
case $selected in
  "ğŸ’¡ Toggle on/off")
    $yee_command toggle
    ;;
  "ğŸ–¼ï¸ Set preset")
    selected_preset=$(printf '%s\n' "${yeelight_presets[@]}" | rofi -dmenu -i -p "Select preset:")
    if [[ -n "${selected_preset}" ]]; then
      $yee_command preset "$selected_preset"
    fi
    ;;
  "ğŸšï¸ Adjust brightness")
    brightness=$(rofi -dmenu -i -p "Enter brightness level:")
    if [[ -n "${brightness}" ]]; then
      $yee_command set bright "$brightness"
    fi
    ;;
esac
